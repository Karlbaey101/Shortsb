{
    "version": "https://jsonfeed.org/version/1",
    "title": "Karlbaey's Shorts • All posts by \"hexo\" tag",
    "description": "",
    "home_page_url": "https://s.karlbaey.top",
    "items": [
        {
            "id": "https://s.karlbaey.top/shorts/speedrun-a4/",
            "url": "https://s.karlbaey.top/shorts/speedrun-a4/",
            "title": "速通a4",
            "date_published": "2025-06-06T14:37:56.000Z",
            "content_html": "<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><div class=\".article-gallery\"><blockquote>\n<p>背景知识：Hexo 是一款博客框架，以生成文件速度极快，社区生态优良以及主题模板丰富而著名。A4 是 Hexo 的一款主题。这次的速通就是针对 A4 主题进行的。<a href=\"https://github.com/HiNinoJay/hexo-theme-A4\">原仓库地址📦</a></p>\n</blockquote>\n<h3 id=\"安装与调试-config-a4-yml\"><a href=\"#安装与调试-config-a4-yml\" class=\"headerlink\" title=\"安装与调试  _config.a4.yml\"></a>安装与调试  _config.a4.yml</h3><p>无需多言。<a href=\"https://doc.ninojay.top/\">完整教程🔗</a></p>\n<h3 id=\"额外调整\"><a href=\"#额外调整\" class=\"headerlink\" title=\"额外调整\"></a>额外调整</h3><h4 id=\"首页设置\"><a href=\"#首页设置\" class=\"headerlink\" title=\"首页设置\"></a>首页设置</h4><p>文档里有一行是这样形容的：</p>\n<p><a href=\"https://pan.moe/f/3JoH0/a4%E6%96%87%E6%A1%A3%E6%9C%89%E8%AF%AF%E9%83%A8%E5%88%86.png\" class=\"gallery-item\" style=\"box-shadow: none;\"> <img src=\"https://pan.moe/f/3JoH0/a4%E6%96%87%E6%A1%A3%E6%9C%89%E8%AF%AF%E9%83%A8%E5%88%86.png\"></a></p>\n<p>但是经我本人调试，如果真的这样做的话，会导致你在 hexo s 生成测试网页后发现 “CANNOT GET &#x2F;”，也就是说，你创建了这个页面等于没有（事实上是有的，它在“你的域名&#x2F;index&#x2F;”这里）。这显然不是我们想要的，所以我们只需要在本地 hexo 文件夹的 source 目录中创建一个 index.md 并把下面这段文字复制进去。</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs markdown\">---<br>title: index<br>date: &#123;改为你创建的时间&#125;<br>comment: false<br><span class=\"hljs-section\">layout: true</span><br><span class=\"hljs-section\">---</span><br></code></pre></td></tr></table></figure>\n\n<p>这样就有了一个需要的主页。</p>\n<p>同时我建议把 <code>hexo-generator-index</code> 这个插件删了。这个插件是用在 Hexo 自身创建存档页的，比如大部分 Hexo 博客点进去就是一条一条的文章，就是这个插件在发挥作用。但 A4 不需要，作者已经替我们写好了创建文章列表的代码，如果留着这个插件反而会导致首页炸掉，具体怎样炸请自行测试。</p>\n<h4 id=\"修补首页-bug\"><a href=\"#修补首页-bug\" class=\"headerlink\" title=\"修补首页 bug\"></a>修补首页 bug</h4><p>按照上面的操作，理论上是可以正常生成首页了，但是有可能发生这种现象：</p>\n<p><a href=\"https://pan.moe/f/rQjC1/%E5%B4%A9%E5%9D%8F%E7%9A%84A4%E9%A6%96%E9%A1%B5.png\" class=\"gallery-item\" style=\"box-shadow: none;\"> <img src=\"https://pan.moe/f/rQjC1/%E5%B4%A9%E5%9D%8F%E7%9A%84A4%E9%A6%96%E9%A1%B5.png\"></a></p>\n<p>这跟一个文件有关，看到<a href=\"https://github.com/HiNinoJay/hexo-theme-A4/blob/main/layout/_partial/footer.ejs\">这里</a>：</p>\n<p><a href=\"https://pan.moe/f/9Ewh1/A4%E6%9C%89%E8%AF%AF%E4%BB%A3%E7%A0%81.png\" class=\"gallery-item\" style=\"box-shadow: none;\"> <img src=\"https://pan.moe/f/9Ewh1/A4%E6%9C%89%E8%AF%AF%E4%BB%A3%E7%A0%81.png\"></a></p>\n<p>在这个文件 40 行前后，如果这个 <code>index.html</code> 前面没有斜杠，就代表它匹配任意一个末尾以 <code>index.html</code> 结尾的页面。事实上，只要是 Hexo 生成的文章或页面，都是以 <code>index.html</code> 结尾，只是通常看不到而已。所以，我们需要在这个 <code>index.html</code> 前加上一斜杠，这样就能正确渲染了。</p>\n<blockquote>\n<p>如果是 <code>/index.html</code>，就意味着只匹配 <code>你的域名/</code>这个页面。这是 URL 的性质决定的。</p>\n</blockquote>\n<p>修改后，应该是这个样子的。</p>\n<p><a href=\"https://pan.moe/f/YK8HD/%E4%BF%AE%E5%A5%BD%E7%9A%84A4%E9%A6%96%E9%A1%B5.png\" class=\"gallery-item\" style=\"box-shadow: none;\"> <img src=\"https://pan.moe/f/YK8HD/%E4%BF%AE%E5%A5%BD%E7%9A%84A4%E9%A6%96%E9%A1%B5.png\"></a></p>\n<p>我已经针对这个问题提交了 PR，等待作者回复。</p>\n<h4 id=\"修改页脚\"><a href=\"#修改页脚\" class=\"headerlink\" title=\"修改页脚\"></a>修改页脚</h4><p>下面是 A4 默认的页脚（从<a href=\"https://ninojay.top/\">作者的个人站</a>截图所得）</p>\n<p><a href=\"https://pan.moe/f/v4MC3/A4%E5%8E%9F%E5%A7%8B%E9%A1%B5%E8%84%9A1.png\" class=\"gallery-item\" style=\"box-shadow: none;\"> <img src=\"https://pan.moe/f/v4MC3/A4%E5%8E%9F%E5%A7%8B%E9%A1%B5%E8%84%9A1.png\"></a></p>\n<p><a href=\"https://pan.moe/f/bqPS2/A4%E5%8E%9F%E5%A7%8B%E9%A1%B5%E8%84%9A2.png\" class=\"gallery-item\" style=\"box-shadow: none;\"> <img src=\"https://pan.moe/f/bqPS2/A4%E5%8E%9F%E5%A7%8B%E9%A1%B5%E8%84%9A2.png\"></a></p>\n<p>如果需要修改页脚，在<a href=\"https://github.com/HiNinoJay/hexo-theme-A4/blob/main/layout/_partial/footer.ejs\">这个文件</a>里找到对应的地方修改即可，记得善用 hexo s 进行调试。</p>\n<p><em><strong>(The end)</strong></em></p>\n</div>",
            "tags": [
                "Hexo"
            ]
        },
        {
            "id": "https://s.karlbaey.top/shorts/repair-A4/",
            "url": "https://s.karlbaey.top/shorts/repair-A4/",
            "title": "修复 A4 主题记录",
            "date_published": "2025-06-01T17:54:43.000Z",
            "content_html": "<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><div class=\".article-gallery\"><p>这次是一次速修，比刚入门 Hexo 的时候不认识 yaml 怎么写，一个小小的格式错误就耗费了我快半个小时要聪明得多。<a href=\"//karlbaey.top/articles/repair-success/\">链接🔗</a></p>\n<p>之前在<a href=\"/about\">关于页面</a>就有提到了小作品站用到的主题是 <a href=\"https://github.com/HiNinoJay/hexo-theme-A4\">A4</a>，主要是看重它的简洁，适合我写小作品也适合小伙伴阅读。但是……不出意外地，又出意外了。</p>\n<p>我兴冲冲地配置好了 <code>_config.yml</code> 和 <code>_config.a4.yml</code>，本来按照作者的意思只要在命令行输入 <code>hexo new page index</code> 就能够自动生成首页了。但是……细心的小伙伴估计也发现了，小作品站的首页并不是根目录，而是 <code>/master</code>。这又是一个漫长的故事。</p>\n<p>一开始我的确是以根目录作为首页的，但在我写完第一篇小作品并发表后，问题就诞生了。</p>\n<blockquote>\n<p>文件架构：</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs txt\"><br>source/<br>  |<br>  +--...<br>  +--index.md<br></code></pre></td></tr></table></figure>\n\n<p>其中，（预计）<code>index.md</code> 会被渲染成主页。</p>\n</blockquote>\n<p><a href=\"https://pan.moe/f/Xjas1/%E5%9D%8F%E6%8E%89%E7%9A%84s.karlbaey.top%E9%A6%96%E9%A1%B5.jpeg\" class=\"gallery-item\" style=\"box-shadow: none;\"> <img src=\"https://pan.moe/f/Xjas1/%E5%9D%8F%E6%8E%89%E7%9A%84s.karlbaey.top%E9%A6%96%E9%A1%B5.jpeg\"></a></p>\n<p>很明显这是首页被当成一篇小作品解析了，因为有明显的字样“上一篇”“下一篇”，被 Waline 占领我就不知道为什么了。我试着把 <code>index.md</code> 移动到 <code>/master</code> 里面，再做重定向，就可以避免这样的问题。但是后来还是被现实打趴下了。Hexo 默认会在首页生成一组最近文章，就像<a href=\"//karlbaey.top\">主站</a>显示的那样，但是我现在不需要啊，如果 Hexo 主动生成了，那反倒会把我提前准备好的重定向页给覆盖了，这明显就不是我想看到的。</p>\n<p>挺糟心的，而且并没有什么好的解决方案。所以后来问了 DeepSeek，倒是一针见血。</p>\n<blockquote>\n<h3 id=\"额外说明\"><a href=\"#额外说明\" class=\"headerlink\" title=\"额外说明\"></a>额外说明</h3><ul>\n<li><p><strong>菜单链接调整</strong>：如果你希望导航菜单中的 “首页” 指向你的自定义页面，需在主题配置中修改菜单链接为 <code>/</code>。</p>\n</li>\n<li><p><strong>完全禁用默认首页</strong>：如果不需要 Hexo 生成的博客列表首页，可卸载插件：</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">npm uninstall hexo-generator-index --save<br></code></pre></td></tr></table></figure></li>\n</ul>\n<p>按此配置后，Hexo 会完全保留你的自定义 <code>index.html</code> 并跳过渲染，确保它直接出现在网站根目录。</p>\n<p><a href=\"https://chat.deepseek.com/a/chat/s/6d06260e-8116-4f87-92d6-fcc01f1972d4\">原对话链接🔗</a></p>\n</blockquote>\n<p>不得已而思其次，我发现 A4 的作品存档并不依赖于 Hexo 本身，而是作者自己写了代码用来列出全部的作品页（也就是列举出形如 <code>s.karlbaey.top/shorts/...</code> 这样的页面）。所以我大胆地删掉了 <code>hexo-generator-index</code> 这个包，再给根目录做一个重定向，就可以抵达我真正的首页 <code>/master</code> 了。</p>\n<p><a href=\"https://pan.moe/f/6JJc1/%E9%87%8D%E5%AE%9A%E5%90%91%E4%BB%A3%E7%A0%81.png\" class=\"gallery-item\" style=\"box-shadow: none;\"> <img src=\"https://pan.moe/f/6JJc1/%E9%87%8D%E5%AE%9A%E5%90%91%E4%BB%A3%E7%A0%81.png\"></a></p>\n<p>问题完美解决~</p>\n<p>编辑：突然发现部署之后点进这一片小作品，会立刻跳回主页。</p>\n<p><a href=\"https://pan.moe/f/KrWi4/%E9%97%AA%E9%80%80%E5%9B%9Emaster.gif\" class=\"gallery-item\" style=\"box-shadow: none;\"> <img src=\"https://pan.moe/f/KrWi4/%E9%97%AA%E9%80%80%E5%9B%9Emaster.gif\"></a></p>\n<p>其实原因很简单：上面展示重定向代码的时候，Hexo 自动把嵌入在代码块里的重定向代码识别出来了，这就导致了闪退回首页。烂透了……</p>\n<p><em><strong>(The end)</strong></em></p>\n</div>",
            "tags": [
                "Hexo"
            ]
        }
    ]
}